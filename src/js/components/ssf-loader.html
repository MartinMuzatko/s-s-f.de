<ssf-loader>
    <ssf-dialog ref="dialog" size="medium" type={type}>
        <div if={parent.loading} class="loader">
            <svg class="loader__image loader__image-loading" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" width="256px" height="256px" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 256 256">
                <defs>
                    <style type="text/css">
                    .loader__image-loading .str0 {stroke:#2B2A29;stroke-width:2.36221}
                    .loader__image-loading .fil3 {fill:none}
                    .loader__image-loading .fil1 {fill:#FEFEFE}
                    .loader__image-loading .fil0 {fill:#2B2A29}
                    .loader__image-loading .fil2 {fill:#FECC00}
                    </style>
                </defs>
                <g id="Layer_x0020_1">
                    <metadata id="CorelCorpID_0Corel-Layer"/>
                    <g id="eye1">
                        <circle class="fil0 str0" cx="95" cy="129" r="8"/>
                        <circle class="fil1" cx="93" cy="125" r="2"/>
                    </g>
                    <g id="eye2">
                        <circle class="fil0 str0" cx="158" cy="129" r="8"/>
                        <circle class="fil1" cx="156" cy="125" r="2"/>
                    </g>
                    <g id="_2396003317088">
                        <path class="fil2" d="M185 145c12,-23 -37,-75 -41,-25 -1,14 34,37 41,25zm-117 0c-12,-23 37,-75 41,-25 1,14 -34,37 -41,25zm43 -95c-3,-8 -2,-17 -1,-26 9,13 11,20 23,25 4,2 9,3 14,4 1,-16 25,-31 38,-47 23,21 39,64 21,92 21,13 32,28 36,59 -10,-17 -20,-23 -28,-28 14,13 23,44 28,64 -8,-12 -17,-24 -37,-27 12,14 21,43 13,65 -5,-30 -36,-34 -60,-32 2,14 6,28 10,42 -2,0 36,5 33,6 -29,6 -124,7 -145,1 -3,-1 34,-7 32,-7 5,-12 8,-26 8,-42 -24,-2 -54,2 -60,32 -7,-22 1,-51 13,-65 -20,3 -28,15 -36,27 4,-20 13,-51 27,-64 -8,5 -18,11 -27,28 5,-47 33,-53 35,-59 -18,-28 -2,-71 22,-92 12,16 34,31 35,47 1,0 4,-2 6,-3z"/>
                        <path class="fil3 str0" d="M111 50c-2,1 -5,3 -6,3 -1,-16 -23,-31 -35,-47 -24,21 -40,64 -22,92 -2,7 -30,12 -35,59 9,-17 19,-23 27,-28 -14,13 -23,44 -27,64 8,-12 16,-24 36,-27 -12,14 -20,43 -13,65 6,-30 36,-34 60,-32 1,15 -3,29 -9,42l-31 6m82 -160c-8,-3 -19,6 -23,11 1,-4 5,-20 23,-23 -12,-5 -25,-3 -38,8 4,-10 10,-23 27,-22 -12,-1 -22,-8 -17,-37 9,13 11,20 23,25 4,2 9,3 14,4 1,-16 25,-31 38,-47 23,21 39,64 21,92 8,9 31,12 36,59 -10,-17 -20,-23 -28,-28 14,13 23,44 28,64 -8,-12 -17,-24 -37,-27 12,14 21,43 13,65 -5,-30 -36,-34 -60,-32 1,14 5,28 9,42l35 6"/>
                        <path class="fil3 str0" d="M125 251c-2,-5 -6,-7 -12,-10 13,-2 16,4 17,8 -1,-6 4,-10 9,-11 -4,5 -6,7 -3,11 1,-6 7,-5 9,-5 -1,1 -4,2 -4,3"/>
                        <path class="fil0 str0" d="M100 156c-14,5 15,28 28,28 13,0 37,-23 28,-28 -9,-5 -43,-4 -56,0z"/>
                        <path class="fil3 str0" d="M126 183c1,0 3,8 0,11 -7,2 -7,5 -17,0 -1,0 -12,-6 -12,-6"/>
                        <path class="fil3 str0" d="M130 183c-1,0 -4,8 -1,11 7,2 8,5 17,0 2,0 12,-6 13,-6"/>
                        <polyline class="fil3 str0" points="105,191 105,198 109,193 "/>
                        <polyline class="fil3 str0" points="150,193 150,199 147,194 "/>
                        <path class="fil3 str0" d="M68 145c-12,-23 37,-75 41,-25 0,6 -4,12 -9,15"/>
                        <path class="fil3 str0" d="M185 145c13,-23 -36,-75 -40,-25 0,6 4,12 8,15"/>
                        <path class="fil2" d="M65 86l16 -4 3 -20c-6,-7 -5,-12 -6,-22 -13,17 -10,24 -2,29 -11,-6 -19,1 -25,7 12,-4 21,-2 27,5 -13,-3 -21,7 -23,9 5,-3 7,-4 10,-4z"/>
                        <path class="fil2" d="M188 86l-16 -4 -3 -20c6,-7 5,-12 6,-22 13,17 10,24 2,29 11,-6 19,1 25,7 -12,-4 -21,-2 -27,5 13,-3 21,7 23,9 -5,-3 -8,-4 -10,-4z"/>
                        <path class="fil1" d="M85 64c-19,-18 -11,-31 -17,-49 -23,32 -26,58 -18,81 21,-8 6,-17 35,-32z"/>
                        <path class="fil1" d="M169 64c20,-18 12,-31 18,-49 23,32 25,58 18,81 -21,-8 -7,-17 -36,-32z"/>
                        <path class="fil2" d="M66 86l19 -21c-5,-7 -6,-15 -7,-25 -13,17 -7,27 0,31 -10,-5 -21,-1 -27,5 12,-2 16,-4 22,3 -12,-2 -15,9 -17,11 3,-1 8,-5 10,-4z"/>
                        <path class="fil2" d="M187 86l-19 -21c5,-7 6,-15 7,-25 13,17 7,27 0,31 10,-5 21,-1 27,5 -12,-2 -16,-4 -22,3 12,-2 15,9 17,11 -3,-1 -8,-5 -10,-4z"/>
                        <path class="fil3 str0" d="M85 65c-5,-7 -6,-15 -7,-25 -13,17 -7,27 0,31 -10,-5 -21,-1 -27,5 12,-2 16,-4 22,3 -12,-2 -15,9 -17,11 3,-1 8,-5 10,-4"/>
                        <path class="fil3 str0" d="M168 65c5,-7 6,-15 7,-25 13,17 7,27 0,31 10,-5 21,-1 27,5 -12,-2 -16,-4 -22,3 12,-2 15,9 17,11 -3,-1 -8,-5 -10,-4"/>
                    </g>
                </g>
            </svg>
            <div class="loader__message">
                <yield from="loading-message" />
            </div>
        </div>
        <div if={!parent.loading} class="loader">
            <svg class="loader__image loader__image-success" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="256px" height="256px" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 256 256" xmlns:xlink="http://www.w3.org/1999/xlink">
                <defs>
                    <style type="text/css">

                    .loader__image-success .str1 {stroke:#2B2A29;stroke-width:2.36221}
                    .loader__image-success .str0 {stroke:#2B2A29;stroke-width:0.900003}
                    .loader__image-success .fil3 {fill:none}
                    .loader__image-success .fil1 {fill:#FEFEFE}
                    .loader__image-success .fil4 {fill:#2B2A29}
                    .loader__image-success .fil0 {fill:#FECC00}
                    .loader__image-success .fil2 {fill:#F6B096}
                    </style>
                </defs>
                <g id="Layer_x0020_1">
                    <metadata id="CorelCorpID_0Corel-Layer"/>
                    <path class="fil0" d="M65 86l16 -4 3 -20c-6,-7 -5,-12 -6,-22 -13,17 -10,24 -2,29 -11,-6 -19,1 -25,7 12,-4 21,-2 27,5 -13,-3 -21,7 -23,9 5,-3 7,-4 10,-4z"/>
                    <path class="fil0" d="M188 86l-16 -4 -3 -20c6,-7 5,-12 6,-22 13,17 10,24 2,29 11,-6 19,1 25,7 -12,-4 -21,-2 -27,5 13,-3 21,7 23,9 -5,-3 -8,-4 -10,-4z"/>
                    <path class="fil0" d="M111 50c-3,-8 -2,-17 -1,-26 9,13 11,20 23,25 4,2 9,3 14,4 1,-16 25,-31 38,-47 23,21 39,64 21,92 21,13 32,28 36,59 -10,-17 -20,-23 -28,-28 14,13 23,44 28,64 -8,-12 -17,-24 -37,-27 12,14 21,43 13,65 -5,-30 -36,-34 -60,-32 2,14 6,28 10,42 -2,0 36,5 33,6 -29,6 -124,7 -145,1 -3,-1 34,-7 32,-7 5,-12 8,-26 8,-42 -24,-2 -54,2 -60,32 -7,-22 1,-51 13,-65 -20,3 -28,15 -36,27 4,-20 13,-51 27,-64 -8,5 -18,11 -27,28 5,-47 33,-53 35,-59 -18,-28 -2,-71 22,-92 12,16 34,31 35,47 1,0 4,-2 6,-3z"/>
                    <path class="fil1" d="M85 64c-19,-18 -11,-31 -17,-49 -23,32 -26,58 -18,81 21,-8 6,-17 35,-32z"/>
                    <path class="fil2" d="M113 199l15 -5 15 5c1,33 -33,28 -30,0z"/>
                    <path class="fil3 str0" d="M143 197c1,36 -33,30 -30,0"/>
                    <path class="fil1" d="M169 64c20,-18 12,-31 18,-49 23,32 25,58 18,81 -21,-8 -7,-17 -36,-32z"/>
                    <path class="fil3 str1" d="M111 50c-2,1 -5,3 -6,3 -1,-16 -23,-31 -35,-47 -24,21 -40,64 -22,92 -2,7 -30,12 -35,59 9,-17 19,-23 27,-28 -14,13 -23,44 -27,64 8,-12 16,-24 36,-27 -12,14 -20,43 -13,65 6,-30 36,-34 60,-32 1,15 -3,29 -9,42l-31 6m82 -160c-8,-3 -19,6 -23,11 1,-4 5,-20 23,-23 -12,-5 -25,-3 -38,8 4,-10 10,-23 27,-22 -12,-1 -22,-8 -17,-37 9,13 11,20 23,25 4,2 9,3 14,4 1,-16 25,-31 38,-47 23,21 39,64 21,92 8,9 31,12 36,59 -10,-17 -20,-23 -28,-28 14,13 23,44 28,64 -8,-12 -17,-24 -37,-27 12,14 21,43 13,65 -5,-30 -36,-34 -60,-32 1,14 5,28 9,42l35 6"/>
                    <path class="fil0" d="M66 86l19 -21c-5,-7 -6,-15 -7,-25 -13,17 -7,27 0,31 -10,-5 -21,-1 -27,5 12,-2 16,-4 22,3 -12,-2 -15,9 -17,11 3,-1 8,-5 10,-4z"/>
                    <path class="fil0" d="M187 86l-19 -21c5,-7 6,-15 7,-25 13,17 7,27 0,31 10,-5 21,-1 27,5 -12,-2 -16,-4 -22,3 12,-2 15,9 17,11 -3,-1 -8,-5 -10,-4z"/>
                    <path class="fil3 str1" d="M85 65c-5,-7 -6,-15 -7,-25 -13,17 -7,27 0,31 -10,-5 -21,-1 -27,5 12,-2 16,-4 22,3 -12,-2 -15,9 -17,11 3,-1 8,-5 10,-4"/>
                    <path class="fil3 str1" d="M168 65c5,-7 6,-15 7,-25 13,17 7,27 0,31 10,-5 21,-1 27,5 -12,-2 -16,-4 -22,3 12,-2 15,9 17,11 -3,-1 -8,-5 -10,-4"/>
                    <path class="fil3 str1" d="M125 251c-2,-5 -6,-7 -12,-10 13,-2 16,4 17,8 -1,-6 4,-10 9,-11 -4,5 -6,7 -3,11 1,-6 7,-5 9,-5 -1,1 -4,2 -4,3"/>
                    <path class="fil4 str1" d="M100 156c-14,5 15,28 28,28 13,0 37,-23 28,-28 -9,-5 -43,-4 -56,0z"/>
                    <path class="fil3 str1" d="M126 183c1,0 3,8 0,11 -7,2 -7,5 -17,0 -1,0 -12,-6 -12,-6"/>
                    <path class="fil3 str1" d="M130 183c-1,0 -4,8 -1,11 7,2 8,5 17,0 2,0 12,-6 13,-6"/>
                    <path class="fil3 str1" d="M64 106c17,5 30,13 42,22 -13,3 -28,8 -45,10"/>
                    <path class="fil3 str1" d="M189 106c-17,5 -30,13 -42,22 13,3 29,8 46,10"/>
                </g>
            </svg>
            <div class="loader__message">
                <yield from="success-message" />
            </div>
        </div>
    </ssf-dialog>
    <script>
        import './ssf-dialog.html'

        this.loading = true
        this.pos = 1

        moveBackground() {
            this.pos++
            console.log(this.refs.dialog.refs.content.style.backgroundPosition);
            this.refs.dialog.refs.content.style.backgroundPosition = `${this.pos}em ${this.pos}em`
        }

        this.on('load', ()=>{
            this.moveBackgroundInterval = setInterval(this.moveBackground, 500);
            this.loading = true
            this.type = ''
            this.update()
            this.refs.dialog.open()
        })
        this.on('success', ()=>{
            clearInterval(this.moveBackgroundInterval)
            this.loading = false
            this.type = 'success'
            this.update()
            //this.refs.dialog.open()
        })
        this.on('error', ()=>{
            this.loading = false
            this.type = 'error'
            this.update()
            //this.refs.dialog.open()
        })
    </script>
    <style>
        .loader {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around;
        }
        g#eye1, g#eye2 {
            animation-name: roll;
            animation-duration: 1000ms;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
        }

        g#eye1 {
            transform-origin: top left;
        }

        g#eye2 {
            transform-origin: top right;
            animation-delay: -500ms;
        }

        @keyframes roll {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>

</ssf-loader>
